version: v1.0
name: First pipeline example
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: "First block"
    task:
      jobs:
      - name: First job
        commands:
          - cache list
          - cache usage
      - name: Second job
        commands:
          - checkout
          - cd ..
          - cache store repository-$SEMAPHORE_GIT_SHA sem-cache-repo

  - name: "Second block"
    task:
      jobs:
      - name: "cat .semaphore/semaphore.yaml"
        commands:
          - cache restore repository-$SEMAPHORE_GIT_SHA
          - checkout
          - cat .semaphore/semaphore.yaml
